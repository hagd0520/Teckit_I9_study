# 인터럽트 Interrupt

## 1. 정의

: 컴퓨터 시스템에서 발생하는 이벤트 혹은 신호

→ 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우, 실행 중인 작업을 즉시 중단하고 CPU에게 발생된 상황에 대한 우선 처리를 요구함 = 인터럽트 발생

## 2. 사용 이유

: 인터럽트는 컴퓨터 시스템이 다양한 작업을 효과적으로 처리하면서도 신속한 응답성을 유지하고, 그 와중에 필연적으로 발생하는 예외 상황을 처리하는 데 필수적인 메커니즘으로, 컴퓨터 시스템의 안정성, 신뢰성 및 다중 작업에 대한 성능 향상에 기여함.

→ 특정한 어떤 일을 할 시기를 알기 위해 컨트롤러가 계속 관련된 작업을 체크하는 것을 폴링(Polling)이라 하는데, 폴링 중에는 원래 하던 일에 집중할 수가 없게 되어 전체적인 작업 효율이 떨어짐. 그러한 단점에 대응해 나온 것이 인터럽트 방식. (5번에서 이어짐)

## 3. 종류

- 하드웨어 인터럽트: CPU의 하드웨어 신호에 의해 발생
  - 내부 인터럽트(= Trap): 잘못된 명령이나 데이터의 사용에 의해 발생  
    // Exception 오류 발생과 예외 처리 등
  - 외부 인터럽트: 입출력 장치, 타이밍 장치, 전원 등의 외부적 요인으로 발생  
    // 키보드 입력 등
- 소프트웨어 인터럽트: 명령어의 수행에 있어, 프로그램 처리 중 명령의 요청에 의해 발생  
  // 사용자의 프로그램 실행 명령(System Calls)으로 인한 커널 모드 전환 등

+@ 하드웨어(내/외부) 인터럽트 중에서는 OS의 스케쥴링을 위해 하드웨어 타이머에서 정기적으로 발생시키는 타이머 인터럽트도 존재함.

## 4. 처리 과정

: 프로그램이 실행 중에 인터럽트가 발생하면 현재 실행 중인 작업을 중단하고 인터럽트 서비스 루틴 또는 핸들러를 실행하며, 이러한 작업은 인터럽트 컨트롤러와 운영 체제에 의해 관리됨.

1. 주 프로그램이 실행되다가 인터럽트가 발생
2. 현재 수행 중인 프로그램 중지
3. 상태 레지스터와 PC(Program Counter) 등을 스택에 임시 저장
4. 인터럽트 서비스 루틴 실행  
   → 시스템 상에 구현된 방식에 따라 Daisy Chain, 병렬 우선순위 부여 등을 통해 인터럽트 간의 우선순위를 결정. 부여된 순위에 따라 순차적으로 인터럽트를 처리함.

## 5. 인터럽트(Interrupt) VS 폴링(Polling)

#### : 컨트롤러가 입력을 받아들이는 두 방법 (우선순위 판별법)

- 인터럽트 (Interrupt)
  : MCU(마이크로컨트롤러 장치) 자체가 하드웨어적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식

  - 이벤트 기반: 외부 이벤트나 상태 변화에 반응하는 이벤트 기반 메커니즘
  - 비동기적: 인터럽트는 비동기적(병렬적)으로 발생하며, 시스템은 이벤트가 발생할 때까지 대기하지 않고 다른 작업을 수행함.
  - 자원 효율적: 이벤트 발생 전까지 다른 작업을 수행함으로써 자원을 효율적으로 사용하며, 시스템의 응답성을 향상시킴.

- 폴링 (Polling)
  : 사용자가 명령어를 사용해 입력 핀의 값을 계속 읽어 변화를 알아낸 뒤, 인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아 이에 맞는 인터럽트 서비스 루틴을 수행하는 방식

  - 주기적인 확인: 주기적으로 상태를 확인하고 이벤트의 발생 여부를 주기적으로 확인하는 매커니즘
  - 동기적: 폴링은 동기적(순차적)으로, 지정된 상태 확인 주기마다 발생함.
  - 자원 부담: 주기적 확인 작업을 수행함에 있어 시스템 리소스를 불필요하게 소비할 수 있음.

인터럽트 방식은 하드웨어로 지원을 받아야 하는 제약이 있지만, 폴링에 비해 신속하게 대응할 수 있어, 실시간 대응에 필수적임.

**즉, 인터럽트는 발생시기를 예측하기 힘든 경우에 컨트롤러가 가장 빠르게 대응할 수 있는 방법으로, 빠른 응답성과 높은 자원 효율성, 이벤트 기반 모델을 통한 단순한 구현 등으로 이벤트 기반 시스템에서 선호됨. 반면 폴링은 특정 경우나 특수한 요구사항을 충족시키기 위해 별도로 사용됨.**
<br><br>

#### 참조

[인터럽트(Interrupt)](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Interrupt.md)
