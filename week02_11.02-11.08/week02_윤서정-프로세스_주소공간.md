## Prologue. 사전 지식

- 프로그램: 실행 예정인 명령어의 집합. 특정 작업 수행을 목적으로 파일 시스템에 저장되어 있는 소프트웨어 코드.
- 프로세스: 실행중인 프로그램의 인스턴스. 메인 메모리(RAM) 상에 올라 (로드되어) CPU상에서 작업 중인 프로그램과 그 실행 환경을 통칭.
- 스레드: 프로세스 안에서 실행되는 각각의 흐름, 최소 실행 단위. 프로세스의 병렬 작업이나 동시에 여러 작업을 수행하기 위한 주요 도구.

### 각각의 프로세스가 독립적으로 할당 받는 주소공간 (스레드 간 공유)

- **Code 영역**: 코드 자체를 구성하는 메모리
- **Data 영역**: 전역변수, 정적변수(static), 배열 등 초기화 된 데이터
- BSS 영역: 초기화 전의 데이터
- **Heap 영역**: 동적 할당 시 사용 (new() 등)
- 메모리 매핑 영역: 파일 I/O, 공유 라이브러리, 공유 메모리 등 매핑 및 읽고 쓰기 작업 관련

### 각각의 스레드가 독립적으로 할당 받는 주소공간 (스레드 간 독립)

- **Stack 영역**: 지역변수, 매개변수, 리턴 값 등 함수 호출 및 복귀, 지역변수 관련 정보를 저장하는 임시 메모리

: 스레드 간 독립적인 동작 수행을 위해 Stack Segment는 따로 할당함
<br><br>

# 프로세스 주소 공간

## 1. 주소 공간

: 주소 공간이란, 프로세스가 메모리 내에서 사용하는 가상 메모리 공간을 의미. 프로세스가 메모리에서 데이터와 코드를 저장 및 조작하는 데 사용하는 공간으로, 논리적으로 연속적인 주소 범위로 구성됨.

## 2. 공간 분할의 목적

: 여러 프로세스는 병렬적으로 / 동시에 작업하게 되며, 한 프로세스 안에서도 여러 스레드가 동시에 작업하게 됨. 따라서 메모리를 효율적으로 사용하는 일이 매우 중요함. 프로세스는 최대한 데이터를 공유하면서 메모리의 전체 사용량을 줄이기 위해 따로 주소 공간을 구분함.

## 3. 주소 공간의 할당 과정

: 프로그램이 메인 메모리에 로드되어(= 실행 파일이 복사되어) CPU에 의해 실행되면, 프로세스가 실행되면서 메모리에 해당 프로세스의 주소 공간이 할당됨.<br>
=> Code / Data / Stack

## 4. 주요 주소 공간

- 코드 Segment : 프로그램 소스 코드 (static 함수는 여기 포함됨)
- 데이터 Segment : 전역 변수, 정적 변수(static 변수)
- 스택 Segment : 함수, 지역 변수

: 스택은 LIFO(Last In First Out)의 후입선출 구조로, 그 특성상 초반에 선언되는 전역변수는 스택에 저장했을 때 메모리를 비효율적으로 사용하게 됨. 이에 전역변수는 따로 데이터 영역에, 스택에는 함수와 지역변수를 저장하여, 메모리를 효율적으로 사용함.
<br><br>

#### 참조

[프로세스 주소 공간](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Process%20Address%20Space.md)
